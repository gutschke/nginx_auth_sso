location /auth {
  root /usr/share/nginx/auth/html;
  rewrite /auth(/(.*))? /$2 break;
  location ~ ^/auth(/(index.html)?)?$ {
    rewrite .* /index.html break;
    header_filter_by_lua 'ngx.header.cache_control =
                            "private, no-store, no-cache, must-revalidate"
                          ngx.header.pragma = "no-cache"
                          ngx.header.expires = "0"';
    body_filter_by_lua_file /usr/share/nginx/auth/challenge;
  }
}
location /logout {
  default_type "text/plain";
  header_filter_by_lua 'ngx.header.set_cookie = "SSOAuth=; path=/; expires=Thu, 1 Jan 1970 00:00:00 UTC"';
  echo "Logging out...";
}
